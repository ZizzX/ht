{"version":3,"sources":["bem-blocks/form.js","server/api.js","01_main.js"],"names":["window","addEventListener","$form","document","querySelector","$nights","$nightsTo","$formNightTo","$formNight","e","value","target","append","createNode","preventDefault","formData","FormData","json","JSON","stringify","Object","fromEntries","entries","console","log","postData","then","data","catch","err","Error","message","name","finally","reset","async","url","res","fetch","method","body","headers","Content-type","maxDate","changeDatePickerRange","minDate","days","getDate","getMillisecunds","millisec","t","Date","now","month","getMonth","getFullYear","getZero","num","setMaxDate","selector","date","getElementById","setAttribute","setMinDate","element","className","div","createElement","classList","add","textContent","querySelectorAll","parent","el","appendChild"],"mappings":"AAAA;ACAAA,OAAOC,iBAAiB,mBAAoB,KAC1C,MAAMC,EAAQC,SAASC,cAAc,SAC/BC,EAAUF,SAASC,cAAc,WACrCE,EAAYH,SAASC,cAAc,cACnCG,EAAeJ,SAASC,cAAc,mBACtCI,EAAaL,SAASC,cAAc,gBAEtCE,EAAUL,iBAAiB,SAAWQ,KAC/BJ,EAAQK,QAAUD,EAAEE,OAAOD,QAC9BL,EAAQK,MAAQ,GAChBE,OACEL,EACAM,WAAW,MAAO,QAAS,sCAKjCR,EAAQJ,iBAAiB,SAAWQ,KAC7BH,EAAUI,QAAUD,EAAEE,OAAOD,OAASJ,EAAUI,QACnDJ,EAAUI,MAAQ,GAClBE,OACEJ,EACAK,WAAW,MAAO,QAAS,sCAcjCX,EAAMD,iBAAiB,SAAWQ,IAChCA,EAAEK,iBAEF,MAAMC,EAAW,IAAIC,SAASd,GACxBe,EAAOC,KAAKC,UAAUC,OAAOC,YAAYN,EAASO,YACxDC,QAAQC,IAAIP,GACZQ,EAfU,oCAeIR,GACXS,KAAMC,IACLJ,QAAQC,IAAIG,KAEbC,MAAOC,IACN,MAAM,IAAIC,MAAM,UAAYD,EAAIE,QAAU,iBAAmBF,EAAIG,QAElEC,QAAQ,KACP/B,EAAMgC,YAIZ,MAAMT,EAAWU,MAAOC,EAAKT,KAC3B,MAAMU,QAAYC,MAAMF,EAAK,CAC3BG,OAAQ,OACRC,KAAMb,EACNc,QAAS,CAAEC,eAAgB,qCAG7B,aAAaL,EAAIpB;AC7DrB,MAAM0B,QAAUC,sBAAsB,IAChCC,QAAUD,sBAAsB,GAOtC,SAASA,sBAAsBE,GAG7B,OADaC,QADIC,gBAAgBF,IAKnC,SAASC,QAAQE,GACf,MAAMC,EAAIC,KAAKC,MAAQH,EACrBH,EAAO,IAAIK,KAAKD,GAAGH,UACnBM,EAAQ,IAAIF,KAAKD,GAAGI,WAAa,EAKnC,MAFa,GAFJ,IAAIH,KAAKD,GAAGK,iBAEGC,QAAQH,MAAUG,QAAQV,KAKpD,SAASU,QAAQC,GACf,OAAIA,GAAO,GAAKA,EAAM,GACb,IAAMA,EAENA,EAIX,SAASC,WAAWC,EAAUC,GAC5BzD,SAAS0D,eAAeF,GAAUG,aAAa,MAAOF,GAExD,SAASG,WAAWJ,EAAUC,GAC5BzD,SAAS0D,eAAeF,GAAUG,aAAa,MAAOF,GAGxD,SAASZ,gBAAgBF,GAEvB,OADY,MAAsBA,EAIpC,SAASjC,WAAWmD,EAASC,EAAWlC,GACtC,MAAMmC,EAAM/D,SAASgE,cAAcH,GAGnC,OAFAE,EAAIE,UAAUC,IAAIJ,GAClBC,EAAII,YAAcvC,EACXmC,EAET,SAASrD,WAAWmD,EAASC,EAAWlC,GAEpC,OADY5B,SAASoE,iBAAiBN,GAG1C,SAASrD,OAAO4D,EAAQC,GACtB,OAAOD,EAAOE,YAAYD,GArD5Bf,WAAW,aAAcf,SACzBoB,WAAW,aAAclB","file":"../js/main.min.js","sourcesContent":[null,"window.addEventListener(\"DOMContentLoaded\", () => {\r\n  const $form = document.querySelector(\"#form\");\r\n  const $nights = document.querySelector(\"#nights\"),\r\n    $nightsTo = document.querySelector(\"#nights-to\"),\r\n    $formNightTo = document.querySelector(\"#form-nights-to\"),\r\n    $formNight = document.querySelector(\"#form-nights\");\r\n\r\n  $nightsTo.addEventListener(\"change\", (e) => {\r\n    if (+$nights.value >= +e.target.value) {\r\n      $nights.value = \"\";\r\n      append(\r\n        $formNightTo,\r\n        createNode(\"div\", \"error\", \"Не может быть меньше чем от...\")\r\n      );\r\n    }\r\n  });\r\n\r\n  $nights.addEventListener(\"change\", (e) => {\r\n    if (+$nightsTo.value <= +e.target.value && $nightsTo.value) {\r\n      $nightsTo.value = \"\";\r\n      append(\r\n        $formNight,\r\n        createNode(\"div\", \"error\", \"Не может быть больше чем до...\")\r\n      );\r\n    }\r\n  });\r\n\r\n  const URL = \"https://ht.kz/test/searchPartner1\";\r\n  const data = {\r\n    departCity: 10,\r\n    country: 552,\r\n    date: 2021 - 06 - 20,\r\n    nights: 5,\r\n    nightsTo: 15,\r\n  };\r\n\r\n  $form.addEventListener(\"submit\", (e) => {\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData($form);\r\n    const json = JSON.stringify(Object.fromEntries(formData.entries()));\r\n    console.log(json);\r\n    postData(URL, json)\r\n      .then((data) => {\r\n        console.log(data);\r\n      })\r\n      .catch((err) => {\r\n        throw new Error(\"Error: \" + err.message + \", error name: \" + err.name);\r\n      })\r\n      .finally(() => {\r\n        $form.reset();\r\n      });\r\n  });\r\n\r\n  const postData = async (url, data) => {\r\n    const res = await fetch(url, {\r\n      method: \"POST\",\r\n      body: data,\r\n      headers: { \"Content-type\": \"application/json; charset=UTF-8\" },\r\n    });\r\n\r\n    return await res.json();\r\n  };\r\n});\r\n","const maxDate = changeDatePickerRange(90);\r\nconst minDate = changeDatePickerRange(1);\r\n\r\nsetMaxDate(\"date-input\", maxDate);\r\nsetMinDate(\"date-input\", minDate);\r\n\r\n/* ============= functions =============== */\r\n\r\nfunction changeDatePickerRange(days) {\r\n  const millesec = getMillisecunds(days);\r\n  const date = getDate(millesec);\r\n  return date;\r\n}\r\n\r\nfunction getDate(millisec) {\r\n  const t = Date.now() + millisec,\r\n    days = new Date(t).getDate(),\r\n    month = new Date(t).getMonth() + 1,\r\n    year = new Date(t).getFullYear();\r\n\r\n  const date = `${year}-${getZero(month)}-${getZero(days)}`;\r\n\r\n  return date;\r\n}\r\n\r\nfunction getZero(num) {\r\n  if (num >= 0 && num < 10) {\r\n    return \"0\" + num;\r\n  } else {\r\n    return num;\r\n  }\r\n}\r\n\r\nfunction setMaxDate(selector, date) {\r\n  document.getElementById(selector).setAttribute(\"max\", date);\r\n}\r\nfunction setMinDate(selector, date) {\r\n  document.getElementById(selector).setAttribute(\"min\", date);\r\n}\r\n\r\nfunction getMillisecunds(days) {\r\n  const mil = 1000 * 60 * 60 * 24 * days;\r\n  return mil;\r\n}\r\n\r\nfunction createNode(element, className, message) {\r\n  const div = document.createElement(element);\r\n  div.classList.add(className);\r\n  div.textContent = message;\r\n  return div;\r\n}\r\nfunction createNode(element, className, message) {\r\n    const div = document.querySelectorAll(className);\r\n    return div;\r\n  }\r\nfunction append(parent, el) {\r\n  return parent.appendChild(el);\r\n}\r\n"]}