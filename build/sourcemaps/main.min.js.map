{"version":3,"sources":["bem-blocks/form.js","server/api.js","01_main.js"],"names":["form","window","addEventListener","$form","document","querySelector","e","preventDefault","formData","FormData","json","JSON","stringify","Object","fromEntries","entries","console","log","postData","then","data","catch","err","Error","message","name","finally","reset","async","url","res","fetch","method","body","headers","Content-type","createNode","element","createElement","append","parent","el","appendChild","millesec","getMillisecunds","objDate","getDate","changeDatePickerRange","days","year","month","rangeDate","t","Date","now","getMonth","getFullYear","getZero","num","setMaxDate","selector","date","getElementById","setAttribute","setMinDate"],"mappings":"AAAA,SAASA;ACATC,OAAOC,iBAAiB,mBAAoB,KAC1C,MAAMC,EAAQC,SAASC,cAAc,SAWrCF,EAAMD,iBAAiB,SAAWI,IAChCA,EAAEC,iBAEF,MAAMC,EAAW,IAAIC,SAASN,GACxBO,EAAOC,KAAKC,UAAUC,OAAOC,YAAYN,EAASO,YACxDC,QAAQC,IAAIP,GACZM,QAAQC,IAAIT,GACZU,EAhBU,oCAgBIR,GACXS,KAAMC,IACLJ,QAAQC,IAAIG,KAEbC,MAAOC,IACN,MAAM,IAAIC,MAAM,UAAYD,EAAIE,QAAU,iBAAmBF,EAAIG,QAElEC,QAAQ,KACLvB,EAAMwB,YAId,MAAMT,EAAWU,MAAOC,EAAKT,KAC3B,MAAMU,QAAYC,MAAMF,EAAK,CAC3BG,OAAQ,OACRC,KAAMb,EACNc,QAAS,CAAEC,eAAgB,qCAG7B,aAAaL,EAAIpB;ACtCrB,SAAS0B,WAAWC,GAClB,OAAOjC,SAASkC,cAAcD,GAEhC,SAASE,OAAOC,EAAQC,GACtB,OAAOD,EAAOE,YAAYD,GAG5B,MAAME,SAAWC,gBAAgB,IAC3BC,QAAUC,QAAQH,UASxB,SAASI,sBAAsBC,GAC7B,MACMH,EAAUC,QADCF,gBAAgBI,IAGjC,MADa,GAAGH,EAAQI,QAAQJ,EAAQK,SAASL,EAAQG,OAI3D,SAASF,QAAQK,GACf,MAAMC,EAAIC,KAAKC,MAAQH,EACrBH,EAAO,IAAIK,KAAKD,GAAGN,UACnBI,EAAQ,IAAIG,KAAKD,GAAGG,WAAa,EAKnC,MAFa,GAFJ,IAAIF,KAAKD,GAAGI,iBAEGC,QAAQP,MAAUO,QAAQT,KAKpD,SAASS,QAAQC,GACf,OAAIA,GAAO,GAAKA,EAAM,GACb,IAAMA,EAENA,EAIX,SAASC,WAAWC,EAAUC,GAC5BzD,SAAS0D,eAAeF,GAAUG,aAAa,MAAOF,GAExD,SAASG,WAAWJ,EAAUC,GAC5BzD,SAAS0D,eAAeF,GAAUG,aAAa,MAAOF,GAGxD,SAASjB,gBAAgBI,GAEvB,OADY,MAAsBA,EAzCpCW,WAAW,aAAcE,MACzBG,WAAW,aAAcH,MAEzB7C,QAAQC,IAAI6B,QAAQH","file":"../js/main.min.js","sourcesContent":["function form() {\r\n    \r\n}","window.addEventListener(\"DOMContentLoaded\", () => {\r\n  const $form = document.querySelector(\"#form\");\r\n\r\n  const URL = \"https://ht.kz/test/searchPartner1\";\r\n  const data = {\r\n    departCity: 10,\r\n    country: 552,\r\n    date: 2021 - 06 - 20,\r\n    nights: 5,\r\n    nightsTo: 15,\r\n  };\r\n\r\n  $form.addEventListener(\"submit\", (e) => {\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData($form);\r\n    const json = JSON.stringify(Object.fromEntries(formData.entries()));\r\n    console.log(json);\r\n    console.log(formData);\r\n    postData(URL, json)\r\n      .then((data) => {\r\n        console.log(data);\r\n      })\r\n      .catch((err) => {\r\n        throw new Error(\"Error: \" + err.message + \", error name: \" + err.name);\r\n      })\r\n      .finally(() => {\r\n          $form.reset();\r\n      })\r\n  });\r\n\r\n  const postData = async (url, data) => {\r\n    const res = await fetch(url, {\r\n      method: \"POST\",\r\n      body: data,\r\n      headers: { \"Content-type\": \"application/json; charset=UTF-8\" },\r\n    });\r\n\r\n    return await res.json();\r\n  };\r\n});\r\n","function createNode(element) {\r\n  return document.createElement(element);\r\n}\r\nfunction append(parent, el) {\r\n  return parent.appendChild(el);\r\n}\r\n\r\nconst millesec = getMillisecunds(90);\r\nconst objDate = getDate(millesec);\r\n\r\nsetMaxDate(\"date-input\", date);\r\nsetMinDate(\"date-input\", date);\r\n\r\nconsole.log(getDate(millesec));\r\n\r\n// functions\r\n\r\nfunction changeDatePickerRange(days) {\r\n  const millesec = getMillisecunds(days);\r\n  const objDate = getDate(millesec);\r\n  const date = `${objDate.year}-${objDate.month}-${objDate.days}`;\r\n  return date;\r\n}\r\n\r\nfunction getDate(rangeDate) {\r\n  const t = Date.now() + rangeDate,\r\n    days = new Date(t).getDate(),\r\n    month = new Date(t).getMonth() + 1,\r\n    year = new Date(t).getFullYear();\r\n\r\n  const date = `${year}-${getZero(month)}-${getZero(days)}`;\r\n\r\n  return date;\r\n}\r\n\r\nfunction getZero(num) {\r\n  if (num >= 0 && num < 10) {\r\n    return \"0\" + num;\r\n  } else {\r\n    return num;\r\n  }\r\n}\r\n\r\nfunction setMaxDate(selector, date) {\r\n  document.getElementById(selector).setAttribute(\"max\", date);\r\n}\r\nfunction setMinDate(selector, date) {\r\n  document.getElementById(selector).setAttribute(\"min\", date);\r\n}\r\n\r\nfunction getMillisecunds(days) {\r\n  const mil = 1000 * 60 * 60 * 24 * days;\r\n  return mil;\r\n}\r\n"]}